<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Validación de HTML y CSS. Visual Studio Code. Páginas web HTML y hojas de estilo CSS. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../varios/htmlcss.css" title="mclibre">
  <link rel="icon" href="../varios/favicon.svg">
  <link rel="stylesheet" href="../varios/prism.css">
  <script src="../varios/prism.js"></script>
</head>

<body>
  <h1>Visual Studio Code. Validación de HTML y CSS</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-html.svg" alt="Home" title="Ir a página de inicio" width="42" height="48"></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>VSC: Validación</h2>

      <ul>
        <li><a href="#interfaz">Interfaz de validación</a></li>
        <li><a href="#validacion-html">Validación HTML</a></li>
        <li><a href="#validacion-css">Validación CSS</a></li>
        <li><a href="#referencias">Referencias</a></li>
      </ul>
    </div>
  </nav>

  <p>Visual Studio Code no realiza validaciones completas de las páginas web ni de las hojas de estilo, pero puede ayudar a corregir algunos errores en estos archivos.</p>

  <section id="interfaz">
    <h2>Interfaz de validación en Visual Studio Code</h2>

    <p>En la barra lateral se muestran dos iconos <img src="../varios/iconos/icono-vsc-error-2.svg" alt="Visual Studio Code Error" width="32" height="32"> y <img src="../varios/iconos/icono-vsc-warning-2.svg" alt="Visual Studio Code Warning" width="32" height="32"> acompañados de dos números que corresponden al número de problemas detectados por Visual Studio Code en los archivos abiertos. Visual Studio Code distingue entre errores y advertencias (en inglés, <i>warnings</i>), según la gravedad del problema detectado. El número de errores se muestra junto al icono <img src="../varios/iconos/icono-vsc-error-2.svg" alt="Visual Studio Code Error" width="32" height="32">. El número de advertencias se muestra junto al icono <img src="../varios/iconos/icono-vsc-warning-2.svg" alt="Visual Studio Code Warning" width="32" height="32">. También se pueden instalar extensiones que detectan más tipos de problemas, como se explica más adelante en esta lección.</p>

    <p class="mcl-captura">
      <img src="../img/vscode/vsc-validacion-1.png" alt="Visual Studio Code. Validación" width="1024" height="413">
    </p>

    <p>Si Visual Studio Code detecta un problema (errores o advertencias), se muestra un valor distinto de cero.</p>
    <p class="mcl-captura">
      <img src="../img/vscode/vsc-validacion-2.png" alt="Visual Studio Code. Validación" width="1024" height="413">
    </p>

    <p>Haga clic en los iconos para abrir el panel, que mostrará los errores detectados, ordenados por ficheros.</p>
    <p class="mcl-captura">
      <img src="../img/vscode/vsc-validacion-3.png" alt="Visual Studio Code. Validación" width="1024" height="434">
    </p>

    <p>Haga clic en el error para mostrar en el editor el documento correspondiente y la línea en la que se ha identificado el problema. Tenga en cuenta que Visual Studio Code muestra la línea en la que ha identificado el problema, pero el origen del problema puede estar en esa línea o en una línea anterior.</p>

    <p>Las advertencias <img src="../varios/iconos/icono-vsc-warning-2.svg" alt="Visual Studio Code Warning" width="32" height="32"> corresponden a avisos de todo tipo, que en general se aconseja corregir, pero que a menudo no impiden que el documento se muestre correctamente. Por ejemplo, la captura siguiente muestra un aviso que corresponde a una mala práctica (en este caso, el dejar reglas vacías en la hoja de estilo), pero que no provoca ningún problema real.</p>
    <p class="mcl-captura">
      <img src="../img/vscode/vsc-validacion-4.png" alt="Visual Studio Code. Validación" width="1024" height="413">
    </p>

    <p>Los errores <img src="../varios/iconos/icono-vsc-error-2.svg" alt="Visual Studio Code Error" width="32" height="32"> corresponden generalmente a errores de sintaxis que deben corregirse para que el documento sea válido y se pueda mostrar correctamente. A veces un error provoca que Visual Studio Code detecte más errores de los que realmente existen, por eso se aconseja resolver los problemas en orden, para que al corregir uno, desaparezcan los siguientes errores provocados por el anterior.</p>
    <p class="mcl-captura">
      <img src="../img/vscode/vsc-validacion-5.png" alt="Visual Studio Code. Validación" width="1024" height="413">
    </p>

    <p>Cuando se corrigen los errores y avisos, la pestaña Problemas del panel indica que no hay problemas en los archivos abiertos. Puede cerrar el panel haciendo clic en los iconos de la barra lateral o en el icono en forma de cruz situado en la parte superior derecha del panel.</p>
    <p class="mcl-captura">
      <img src="../img/vscode/vsc-validacion-6.png" alt="Visual Studio Code. Validación" width="1024" height="413">
    </p>
  </section>

  <section id="validacion-html">
    <h2>Validación de HTML en Visual Studio Code</h2>

    <p>Las páginas web se pueden validar en Visual Studio Code mediante la extensión <a href="vsc-htmlcss-configuracion.html#htmlhint">HTMLHint</a>. Esta extensión instala y utiliza el analizador de código estático <a href="https://htmlhint.com/">HTMLHint</a>. Este validador no detecta todos los posibles errores, pero sí los más importantes.</p>

    <p>La configuración recomendada para seguir el curso <a href="https://www.mclibre.org/consultar/htmlcss/">Páginas web HTML y hojas de estilo CSS</a> de <a href="https://www.mclibre.org/">mclibre.org</a> se encuentra en la lección <a href="vsc-htmlcss-configuracion.html#htmlhint">Configuración recomendada para HTML y CSS</a>.</p>

    <hr class="corta">

    <p>Los tipos de errores detectados de forma predeterminada por la extensión HTMLHint son los siguientes:</p>
    <ul>
      <li>"attr-lowercase": los nombres de los atributos deben escribirse en minúsculas. Se puede indicar una lista excepciones (por ejemplo, algunos atributos de las etiquetas SVG)</li>
      <li>"attr-no-duplication": los atributos no deben duplicarse</li>
      <li>"attr-value-double-quotes": los valores de los atributos deben escribirse entre comillas dobles</li>
      <li>"doctype-first": el documento debe incluir el preámbulo DOCTYPE</li>
      <li>"id-unique": los atributos <span class="html-atri">id</span> no deben repetirse</li>
      <li>"spec-char-escape": los caracteres especiales deben escribirse como entidades de carácter</li>
      <li>"src-not-empty": los atributos que hacen referencia a un elemento externo (<span class="html-atri">src</span>, <span class="html-atri">href</span>, <span class="html-atri">data</span>) no deben ser vacíos</li>
      <li>"tag-pair": las etiquetas deben cerrarse y estar correctamente anidadas</li>
      <li>"tagname-lowercase": los nombres de las etiquetas deben escribirse en minúsculas</li>
      <li>"title-require": el documento debe incluir el elemento <span class="html-eti">&lt;title&gt;</span> en <span class="html-eti">&lt;head&gt;</span></li>
    </ul>

    <p>Además, HTMLHint permite detectar otro tipos de errores (que están desactivados de forma predeterminada):</p>

    <ul>
      <li>"alt-require": las imágenes deben incluir el atributo <span class="html-atri">alt</span></li>
      <li>"attr-unsafe-chars": los atributos no deben incluir caracteres "inseguros" [referencia: <a href="https://github.com/htmlhint/HTMLHint/wiki/attr-unsafe-chars">documentación de HTMLHint</a>]</li>
      <li>"attr-value-not-empty": los atributos deben tener establecido algún valor</li>
      <li>"doctype-html5": el preámbulo DOCTYPE debe indicar el tipo html</li>
      <li>"head-script-disabled": no deben utilizarse etiquetas <span class="html-eti">&lt;script&gt;</span> en <span class="html-eti">&lt;head&gt;</span></li>
      <li>"href-abs-or-rel": las direcciones deben ser absolutas (abs) o relativas (rel)</li>
      <li>"id-class-ad-disabled": los valores de los atributos <span class="html-atri">id</span> y <span class="html-atri">class</span> no deben contener la palabra "ad" (que bloquean los bloqueadores de publicidad)</li>
      <li>"id-class-value": los valores de los atributos <span class="html-atri">id</span> y <span class="html-atri">class</span> deben utilizar guiones bajos (underline), guiones (dash) o camelCase (hump)</li>
      <li>"inline-script-disabled": los atributos no deben contener scripts</li>
      <li>"inline-style-disabled": no se debe utilizar el atributo <span class="html-atri">style</span></li>
      <li>"space-tab-mixed-disabled": el sangrado debe contener únicamente espacios (space), cuatro espacios (space4) o tabuladores (tab)</li>
      <li>"style-disabled": no se deben utilizar etiquetas <span class="html-eti">&lt;style&gt;</span></li>
      <li>"tag-self-close": las etiquetas vacías deben incluir el carácter final /</li>
    </ul>

    <p>El valor de cada propiedad suele true (activada) o false (desactivada), salvo en los casos en que ofrece más posibilidades (en la explicación anterior los valores se han indicado entre paréntesis).</p>

    <p><strong>Notas</strong>:</p>
    <ul>
      <li>Yo diría que la opción "attr-unsafe-chars" de HTMLHint no funciona en la extensión.</li>
      <li>HTML-Hint dispone de una opción "empty-tag-not-self-closed" (las etiquetas vacías no deben incluir el carácter final) que no está disponible en la extensión. [referencia: <a href="https://github.com/microsoft/vscode-htmlhint/issues/65">issue 65 abierta por mí el 12/10/2019</a></li>
    </ul>

    <hr class="corta">

    <p>Se puede modificar la configuración predeterminada de la extensión HTMLHint de dos maneras, detallando las opciones deseadas:</p>
    <ul>
      <li>en el archivo de configuración <strong>settings.json</strong> (de usuario o de proyecto).

        <div class="codigo">
          <pre>
<code class="language-json">  // Extensión HTMLHint
  //
  // HTMLHint: Options
  // Opciones de configuración de HTMLHint
  "htmlhint.options": {
    // Aquí se escribirían las propiedades ...
  },
  //
  //</code>
</pre>
        </div>
      </li>
      <li>creando un fichero <strong>.htmlhintrc</strong> en la raíz del proyecto de Visual Studio Code.
        <div class="codigo">
          <pre>
<code class="language-json">{
  // Aquí se escribirían las propiedades ...
}</code>
</pre>
        </div>
      </li>
    </ul>

    <p>En ambos casos, sería necesario incluir las diez propiedades predeterminadas ya que dejan de aplicarse de manera predeterminada.</p>
  </section>

  <section id="validacion-css">
    <h2>Validación de CSS en Visual Studio Code</h2>

    <h3>Errores de sintaxis</h3>

    <p>Visual Studio Code detecta los errores de sintaxis en las hojas de estilo. Estos errores deben corregirse puesto que impiden que la hoja de estilo se interprete correctamente.</p>

    <h3>Consejos</h3>

    <p>Además, Visual Studio Code también incluye un validador de hojas de estilo basado parcialmente en <a href="vsc-csslint.html">CSS Lint</a> que proporciona consejos que ayudan a mejorar las hojas de estilo.</p>

    <p>En el archivo de <a href="https://www.mclibre.org/consultar/informatica/lecciones/vsc-personalizacion.html#configuracion">Preferencias de configuración</a>, Visual Studio Code permite especificar el tipo de mensaje mostrado al usuario para cada una de las reglas de validación disponibles:</p>
    <ul>
      <li>Errores (errors). Los errores deben corregirse necesariamente, porque la hoja de estilo no puede interpretarse correctamente mientras contenga estos errores.</li>
      <li>Avisos (warnings). Los avisos deben tomarse como lo que son: consejos, que en unos casos es conveniente seguir, pero en otros casos no, ya que puede haber <a href="https://2002-2012.mattwilcox.net/archive/entry/id/1054/">motivos para estar en desacuerdo</a> con ellos o pueden ser consejos pensados para hojas de estilo complejas, no hojas de estilo sencillas como las que se utilizan en este curso. A medida que el alumno vaya adquiriendo experiencia, podrá ir juzgando por sí mismo si seguir o no esos consejos.</li>
      <li>Ignorar (ignore). Se ignora la regla y no se muestra ningún mensaje al usuario.</li>
    </ul>

    <hr class="corta">

    <p>La configuración predeterminada de Visual Studio Code es la siguiente:</p>
    <ul>
      <li><img src="../varios/iconos/icono-vsc-error.svg" alt="Visual Studio Code Error" width="32" height="32"> Errores ("error"):
        <p>Actualmente (octubre de 2021), los dos consejos que están configurados como errores no parecen funcionar correctamente, ya que parecen no generar nunca mensajes de error.</p>
        <ul>
          <li>
            "css.lint.argumentsInColorFunction": Arguments in Color Function: Número de parámetros incorrecto
            <p>No sé cómo se puede provocar este error y no he encontrado información sobre él. El 21/10/2021 panteé una pregunta en StackOverflow: <a href="https://stackoverflow.com/questions/69651379/visual-studio-code-does-css-lint-argumentsincolorfunction-configuration-work">StackOverflow Question 69651379</a></p>
          </li>
          <li>
            "css.lint.hexColorLength": Hex Color Length: Los colores hexadecimales deben estar formados por tres o seis números hexadecimales.
            <p>Parece que este aviso no funciona, como se comenta en <a href="https://github.com/microsoft/vscode/issues/81808">VSCode issue 81808</a>.</p>
          </li>
        </ul>
      </li>
      <li><img src="../varios/iconos/icono-vsc-warning.svg" alt="Visual Studio Code Warning" width="32" height="32"> Avisos ("warning")
        <ul>
          <li>
            "css.lint.emptyRules": Empty Rules: No use conjuntos de reglas vacíos.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-empty-rules">Disallow empty rules</a></p>
          </li>
          <li>
            "css.lint.fontFaceProperties": Font Face Properties: La regla "@font-face" debe definir las propiedades "src" y "font-family".

            <p>En los ejercicios de fuentes web propuestos en estos apuntes se utiliza una versión sencilla de la propiedad <span class="css-arroba">@font-face</span> que sólo hace referencia a la fuente en formato WOFF y que cumple esta regla, por lo que Visual Studio Code no debería mostrar el aviso:</p>

              <div class="codigo">
                <pre>
<code class="language-css">@font-face {
  font-family: "MyFontFamily";
  src: url("myfont.woff")
}</code>
</pre>
              </div>
          </li>
          <li>
            "css.lint.propertyIgnoredDueToDisplay": Property Ignored Due To Display: La propiedad se ignora a causa de la pantalla. Por ejemplo, con "display: inline", las propiedades "width", "height", "margin-top", "margin-bottom" y "float" no tienen ningún efecto.
            <p>En septiembre de 2020 se eliminó el código que implementaba esta regla [<a href="https://github.com/microsoft/vscode/issues/56907">Issue 56907</a>], por lo que el aviso no se muestra, independientemente de la configuración establecida. El 20/10/2021 abrí una <a href="https://github.com/microsoft/vscode/issues/135493">VSCode Issue 135493</a> preguntando si no deberian eliminar la configuración css.lint.propertyIgnoredDueToDisplay.</p>
          </li>
          <li>
            "css.lint.unknownAtRules": Unknown At Rules: Regla At desconocida.
          </li>
          <li>
            "css.lint.unknownProperties": Unknown Properties: Propiedad desconocida.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Require-use-of-known-properties">Require use of known properties</a></p>
          </li>
          <li>
            "css.lint.validProperties": []: Valid Properties: Lista de propiedades que no se validan con la regla "unknownProperties".
            <p>Esta configuración permite ampliar la lista de propiedades reconocidas como válidas por Visual Studio Code.</p>
          </li>
          <li>Cuando use un prefijo específico del proveedor, incluya también la propiedad estándar.</li>
          <li>
            "css.lint.vendorPrefix": Vendor Prefix: Cuando use un prefijo específico del proveedor, incluya también la propiedad estándar.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Require-standard-property-with-vendor-prefix">Require standard property with vendor prefix</a></p>
          </li>
        </ul>
      </li>
      <li><img src="../varios/iconos/icono-vsc-ignore.svg" alt="Visual Studio Code Ignore" width="32" height="32"> Validaciones desactivadas ("ignore")
        <ul>
          <li>
            "css.lint.boxModel": box-model: No use "width" o "height" al usar "padding" o "border".
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Beware-of-box-model-size">Beware of box model size</a></p>
          </li>
          <li>
            "css.lint.compatibleVendorPrefixes": Compatible Vendor Prefixes: Cuando use un prefijo específico del proveedor, compruebe que también haya incluido el resto de propiedades específicas del proveedor.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Require-compatible-vendor-prefixes">Require compatible vendor prefixes</a></p>
          </li>
          <li>
            "css.lint.duplicateProperties": Duplicate Properties: No use definiciones de estilo duplicadas.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-duplicate-properties">Disallow duplicate properties</a></p>
          </li>
          <li>
            "css.lint.float": Float: Le recomendamos no usar "float". Los valores float producen CSS frágiles que pueden dañarse fácilmente si cambia cualquier aspecto del diseño.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-too-many-floats">Disallow too many floats</a></p>
          </li>
          <li>
            "css.lint.idSelector": ID Selector: Los selectores no deben contener identificadores porque estas reglas están estrechamente ligadas a HTML.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-IDs-in-selectors">IDs in selectors</a></p>

            <p>CSS Lint desaconseja el uso de ids en los selectores porque no se pueden reutilizar en una misma página web y aconseja utilizar clases en su lugar.</p>

            <p>En los ejercicios propuestos en estos apuntes no se hace caso de este consejo ya que los ejercicios lo que pretenden es ilustrar el uso del selector de IDs.</p>

            <div class="filaflex">
              <div class="codigo">
                <pre>
<code class="language-css">div#intro {
  background-color: #E56F60;
}</code>
</pre>
              </div>
              <div class="resultado-html">
                <p>Disallow IDs in selectors - Don't use IDs in selectors.</p>
              </div>
            </div>
          </li>
          <li>
            "css.lint.ieHack": IE Hack: Las modificaciones de IE solo son necesarias cuando se admite IE 7 y versiones anteriores.
          </li>
          <li>
            "css.lint.important": Important: Evite usar !important. Es una indicación que la especificidad de todo el CSS se ha salido de control y debe ser refactorizada.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-%21important">Disallow !important</a></p>
          </li>
          <li>
            "css.lint.importStatement": Import Statement: Las instrucciones Import no se cargan en paralelo.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-%40import">Disallow @import</a></p>

            <p>Si en la hoja de estilo se utilizan reglas-arroba @import, CSS Lint genera un aviso "Disallow @import".</p>

            <div class="filaflex">
              <div class="codigo">
                <pre>
<code class="language-css">@import url("https://fonts.googleapis.com/css?family=Ribeye+Marrow");</code>
</pre>
              </div>
              <div class="resultado-html">
                <p>Disallow @import - @import prevents parallel downloads, use &lt;link&gt; instead. (import)</p>
              </div>
            </div>

            <p>Cuando se utiliza una regla-arroba @import, el navegador descarga el archivo al que se hace referencia y se espera a que termine la descarga para continuar leyendo la hoja de estilo. Eso ralentiza la carga de la página completa, por lo que CSS Lint aconseja utilizar en su lugar un enlace <span class="html-eti">&lt;link&gt;</span> en la página web (en la hoja de estilo no haría falta escribir nada), ya que la descarga de varios ficheros sí que se gestiona en paralelo. Pero entonces la asignación de la fuente a los elementos se debe hacer también en la página web.</p>

            <div class="filaflex">
              <div class="codigo">
                <pre>
<code class="language-html">&lt;link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ribeye+Marrow"&gt;
&lt;style&gt;
  h1 {
    font-family: "RibEye Marrow", cursive;
  }
&lt;/style&gt;</code>
</pre>
              </div>
              <div class="resultado-html">
              </div>
            </div>

            <p>En los ejercicios propuestos en estos apuntes no se hace caso de este consejo y las fuentes de Google Fonts se llaman desde la hoja de estilo.</p>
          </li>
          <li>
            "css.lint.universalSelector": Universal Selector: Se sabe que el selector universal ("*") es lento.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-universal-selector">Disallow universal selector</a></p>
          </li>
          <li>
            "css.lint.unknownVendorSpecificProperties": Unknown Vendor Specific Properties: Propiedad específica del proveedor desconocida.
          </li>
          <li>
            "css.lint.zeroUnits": Zero Units: No se necesita una unidad para cero.
            <p>Corresponde a la regla de CSSLint: <a href="https://github.com/CSSLint/csslint/wiki/Disallow-units-for-zero-values">Disallow units for zero values</a></p>
          </li>
        </ul>
      </li>
      <li>Otras:
        <ul>
          <li>"css.validate": true, Habilita o deshabilita todas las validaciones</li>
        </ul>
      </li>
    </ul>
  </section>

  <section id="referencias">
    <h2>Referencias</h2>
    <ul>
      <li><a href="https://github.com/microsoft/vscode/issues/135493">VSCode Issue 135493</a>: El 20/10/2021 abrí esta <i>issue</i> porque la configuración css.lint.propertyIgnoredDueToDisplay aparece en el fichero de configuración pero no hace nada. En la <a href)="https://github.com/microsoft/vscode/issues/56907">issue 56907</a> dice que en septiembre de 2020 eliminaron la comprobación, así que les pregunté si no deberian eliminar la configuración css.lint.propertyIgnoredDueToDisplay.</li>
      <li><a href="https://stackoverflow.com/questions/69651379/visual-studio-code-does-css-lint-argumentsincolorfunction-configuration-work">StackOverflow Question 69651379</a>: El 20/10/2021 abrí esta pregunta en StackOverflow preguntado si alguien sabe cómo generar el error "css.lint.argumentsInColorFunction": "error".</li>
    </ul>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 21 de octubre de 2021</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="https://www.mclibre.org/consultar/htmlcss/">Páginas web HTML y hojas de estilo CSS</a></strong> por <a href="https://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
